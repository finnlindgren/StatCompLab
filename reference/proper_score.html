<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate proper scores — proper_score • StatCompLab</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate proper scores — proper_score"><meta property="og:description" content="Calculates proper scores for probabilistic predictions"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">StatCompLab</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">21.5.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Project01.html">StatComp Project 1 (2021/22): Simulation and sampling</a>
    </li>
    <li>
      <a href="../articles/Project01Hints.html">Project 01 Hints</a>
    </li>
    <li>
      <a href="../articles/Tutorial01.html">Tutorial 01: R and linear models</a>
    </li>
    <li>
      <a href="../articles/Tutorial01Solutions.html">Tutorial 01: R and linear models (solutions)</a>
    </li>
    <li>
      <a href="../articles/Tutorial02.html">Tutorial 02: Optimization</a>
    </li>
    <li>
      <a href="../articles/Tutorial02Solutions.html">Tutorial 02: Optimization (solutions)</a>
    </li>
    <li>
      <a href="../articles/Tutorial03.html">Tutorial 03: Monte Carlo integration</a>
    </li>
    <li>
      <a href="../articles/Tutorial03Solutions.html">Tutorial 03: Monte Carlo integration (solutions)</a>
    </li>
    <li>
      <a href="../articles/Tutorial04.html">Tutorial 04: Uncertainty and integration</a>
    </li>
    <li>
      <a href="../articles/Tutorial04Solutions.html">Tutorial 04: Uncertainty and integration (solutions)</a>
    </li>
    <li>
      <a href="../articles/Project_Example.html">StatComp Project Example: Numerical statistics</a>
    </li>
    <li>
      <a href="../articles/Project_Example_Solution.html">StatComp Project Example Solution: Numerical Statistics</a>
    </li>
    <li>
      <a href="../articles/Quiz1Solution.html">Quiz 1 Solution (StatComp 2021/22)</a>
    </li>
    <li>
      <a href="../articles/T4sol.html">Tutorial 04: Uncertainty and integration (full solution)</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/finnlindgren/StatCompLab/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate proper scores</h1>
    <small class="dont-index">Source: <a href="https://github.com/finnlindgren/StatCompLab/blob/HEAD/R/scores.R" class="external-link"><code>R/scores.R</code></a></small>
    <div class="hidden name"><code>proper_score.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculates proper scores for probabilistic predictions</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">proper_score</span><span class="op">(</span><span class="va">type</span>, <span class="va">obs</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>type</dt>
<dd><p>A string indicating the type of score to calculate. One of
"se", "ae", "ds", or "interval". See Details below.</p></dd>
<dt>obs</dt>
<dd><p>A vector of observations</p></dd>
<dt>...</dt>
<dd><p>Additional named arguments needed for each type of score, see
Details below.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A vector of calculated scores, one for each observation</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Each score type takes additional arguments that define the prediction model
information to be used in the score calculations. Unless specified otherwise,
the extra arguments should either be scalars (applying to all the predictions)
or vectors of the same length as the <code>obs</code> vector.</p><dl><dt>se</dt>
<dd><p>Squared error score. Requires <code>mean</code>, defining the prediction mean</p></dd>

<dt>ae</dt>
<dd><p>Absolute error score. Requires <code>median</code>, defining the prediction median</p></dd>

<dt>ds</dt>
<dd><p>Dawid-Sebastiani score. Requires <code>mean</code> and <code>sd</code>, defining the mean and
standard deviation of the predictions</p></dd>

<dt>interval</dt>
<dd><p>Squared error score. Requires <code>lwr</code> and <code>upr</code>, defining the
lower and upper prediction interval endpoints, and <code>alpha</code>, defining the
prediction error probability targeted by the prediction intervals</p></dd>


</dl><p>The scores \(S_{type}(F_i,y_i)\) are defined as in the lecture notes,
with <code>obs[i]</code> equal to \(y_i\) and each prediction distribution
\(F_i\) defined by additional named arguments.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Five realisations of N(3, 3^2)</span></span>
<span class="r-in"><span class="va">obs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">5</span>, mean <span class="op">=</span> <span class="fl">3</span>, sd <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># One prediction for each observation. Only one of the predictions describes</span></span>
<span class="r-in"><span class="co"># the true model</span></span>
<span class="r-in"><span class="va">F_mean</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span class="r-in"><span class="va">F_median</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span class="r-in"><span class="va">F_sd</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span class="r-in"><span class="va">F_lwr</span> <span class="op">&lt;-</span> <span class="va">F_mean</span> <span class="op">-</span> <span class="va">F_sd</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.9</span><span class="op">)</span></span>
<span class="r-in"><span class="va">F_upr</span> <span class="op">&lt;-</span> <span class="va">F_mean</span> <span class="op">-</span> <span class="va">F_sd</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">qnorm</a></span><span class="op">(</span><span class="fl">0.1</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Compute the scores</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">  se <span class="op">=</span> <span class="fu">proper_score</span><span class="op">(</span><span class="st">"se"</span>, <span class="va">obs</span>, mean <span class="op">=</span> <span class="va">F_mean</span><span class="op">)</span>,</span>
<span class="r-in">  ae <span class="op">=</span> <span class="fu">proper_score</span><span class="op">(</span><span class="st">"ae"</span>, <span class="va">obs</span>, median <span class="op">=</span> <span class="va">F_median</span><span class="op">)</span>,</span>
<span class="r-in">  ds <span class="op">=</span> <span class="fu">proper_score</span><span class="op">(</span><span class="st">"ds"</span>, <span class="va">obs</span>, mean <span class="op">=</span> <span class="va">F_mean</span>, sd <span class="op">=</span> <span class="va">F_sd</span><span class="op">)</span>,</span>
<span class="r-in">  interval <span class="op">=</span> <span class="fu">proper_score</span><span class="op">(</span><span class="st">"interval"</span>, <span class="va">obs</span>,</span>
<span class="r-in">                          lwr <span class="op">=</span> <span class="va">F_lwr</span>, upr <span class="op">=</span> <span class="va">F_upr</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           se        ae       ds  interval</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1.0912380 1.0446234 1.091238  2.563103</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  7.1007094 2.6647156 3.161472  6.142331</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 47.0109498 6.8564532 7.420663 37.807294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 17.8764166 4.2280512 3.889865 10.252413</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  0.5773211 0.7598165 3.241969 12.815516</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Finn Lindgren.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

